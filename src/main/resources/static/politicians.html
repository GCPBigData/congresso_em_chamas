<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/166647642f.js" crossorigin="anonymous"></script>
    <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <title>Politicians</title>
    <style>

        body {
            min-height: 100vh;
            display: grid;
            grid-template-columns: minmax(400px, 1fr) 250px;
            grid-template-rows: 62px auto;
            grid-template-areas:
                'header header'
                'main aside'
        }

        aside {
            grid-area: aside;
        }

        main {
            padding: 15px;
            grid-area: main;
        }

        .card-deck{
            min-width: 400px;
        }

        .card{
            margin-top: 15px;
            min-width: 350px;
            max-width: 400px;
        }

        .card-header {
            display: flex;
            justify-content: center;
            align-items: center;
            background: url("../assets/stars_transparent_less.png");
        }

        .card-body{
            padding: 0;
        }

        body>header {
            grid-area: header;
            border: 6px solid;
            border-image: linear-gradient(45deg, rgb(0, 143, 104), rgb(250, 224, 66)) 1;
            display: flex;
            /* O alinhamento pra direita se dá com flex-end e não right */
            justify-content: flex-start;
            align-items: center;
        }

        .fa-twitter {
            color: #00aced;
        }

        .google-logo {
            height: 35px;
            width: 35px;
        }

        .congresso-logo {
            height: 36px;
            width: 42px;
        }

        #news-card, #law-projects-card {
            height: 150px;
        }
        
        #twitter-timeline {
            height: calc(100% - 20px);
            margin-top: 10px;
            margin-bottom: 10px;
        }
    </style>
</head>

<body>
    <aside class="border"></aside>
    <main>
        <div class="card-deck d-flex justify-content-center">
            <div class="card shadow">
                <div class="card-header" id="twitter-card">
                    <i class="fab fa-twitter fa-2x"></i>
                </div>
                <div class="card-body">
                    <section id="twitter-timeline" class="d-flex justify-content-center align-items-center">
                        <div class="spinner-border text-warning" role="status" id="twitter-timeline-spinner"></div>
                    </section>
                </div>
            </div>
            <div class="card shadow" id="news-card">
                <div class="card-header">
                    <img src="assets/google_logo.png" class="google-logo">
                </div>
                <div class="card-body d-flex justify-content-center align-items-center">
                    <p>Work in progress!</p>
                </div>
            </div>
            <div class="card shadow" id="law-projects-card">
                <div class="card-header">
                    <img src="assets/congresso_icon.png" class="congresso-logo">
                </div>
                <div class="card-body d-flex justify-content-center align-items-center">
                    <p>Work in progress!</p>
                </div>
            </div>
        </div>
    </main>
    <header>
        <img src="assets/perfil.png" width="48px" height="48px">
    </header>
    <script>
        const politician = new URLSearchParams(window.location.search).get("politician");
        const twitterTimelineSpinner = document.getElementById("twitter-timeline-spinner");
        $.post("politicians", {
            queryString: politician
        }).done(data => {
            twttr.widgets.createTimeline(
                {
                    sourceType: "profile",
                    screenName: data[0].twitterUsername
                },
                document.getElementById("twitter-timeline"),
                {
                    chrome: "nofooter noheader",
                    height: "700"
                }
            );
            twitterTimelineSpinner.style.display = "none";
        })
    </script>
</body>

</html>