<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../node_modules/jquery/dist/jquery.min.js"></script>
    <script src="../node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../js/bootstrap-treeview-1.2.0/dist/bootstrap-treeview.min.js"></script>
    <script src="../node_modules/chart.js/dist/Chart.min.js"></script>
    <link rel="stylesheet" href="../node_modules/bootstrap/dist/css/bootstrap.min.css">
    <script src="https://kit.fontawesome.com/166647642f.js" crossorigin="anonymous"></script>
    <script src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
    <script src="../js/expensesComponents.js"></script>
    <script src="../js/commonComponents.js"></script>
    <link rel="stylesheet" href="../css/commonStyles.css">
    <link rel="stylesheet" href="../css/headerStyles.css">
    <link rel="stylesheet" href="../css/footerStyles.css">
    <title>Congresso em chamas</title>
    <style>
        #chart-container {
            height: 80vh;
            min-width: 75%;
            flex: 1;
            margin-bottom: 3.5rem;
        }

        #chart-details-container {
            min-width: 250px;
            flex: 1;
        }

        #expenses-body {
            background-color: white;
        }

        .fa-money-bill-wave {
            color: green;
        }

        .fa-file-alt {
            color: rgba(255, 127, 39, 0.8);
        }

        .expense-details-card {
            min-width: 100%;
        }

        @media only screen and (min-width: 768px) {

            /* For desktop */
            #chart-details-list {
                overflow: hidden;
                overflow-y: scroll;
            }

            #chart-details-container {
                max-height: 85vh;
            }
        }
    </style>
</head>

<body>
    <main>
        <div class="d-flex flex-wrap p-3" id="expenses-body">
            <div class="mr-3 d-flex flex-column align-items-center" id="chart-container">
                <div class="btn-group btn-group-toggle mb-3" data-toggle="buttons">
                    <label class="btn btn-outline-primary active btn-sm">
                        <input type="radio" name="options" id="option1" autocomplete="off" checked> Esse ano
                    </label>
                    <label class="btn btn-outline-primary btn-sm">
                        <input type="radio" name="options" id="option2" autocomplete="off"> Últimos 6 meses
                    </label>
                    <label class="btn btn-outline-primary btn-sm">
                        <input type="radio" name="options" id="option3" autocomplete="off"> Legislatura
                    </label>
                </div>
            </div>
            <div class="border shadow d-flex justify-content-center align-items-center" id="chart-details-container">
                <small class="text-center w-50">Clique em uma despesa no gráfico para visualizar os detalhes.</small>
            </div>
        </div>
    </main>
    <header>
        <div class="w-100 d-flex justify-content-between flex-wrap pb-1 align-items-center">
            <nav class="navbar navbar-expand-lg navbar-dark pb-0 pt-0">
                <a class="navbar-brand" href="../index.html">
                    <div class="congresso-header w-100">
                        <img src="../assets/perfil-nobackground.png" width="48px" height="48px">
                        <h5 class="text-light mb-0">Congresso em Chamas</h5>
                    </div>
                </a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarTogglerDemo03"
                    aria-controls="navbarTogglerDemo03" aria-expanded="false" aria-label="Toggle navigation">
                    <i class="fas fa-bars"></i>
                </button>
                <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
                    <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
                        <li class="nav-item">
                            <a class="nav-link" href="./search.html">Busca</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./twitter.html">Twitter</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./news.html">Notícias</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="./proposals.html">Propostas</a>
                        </li>
                        <li class="nav-item active">
                            <a class="nav-link" href="./expenses.html">Despesas<span
                                    class="sr-only">(current)</span></a>
                        </li>
                    </ul>
                </div>
            </nav>
            <div class="d-flex justify-content-start align-items-center">
                <div id="profile-container" class="d-flex"></div>
            </div>
        </div>
    </header>
    <footer class="bg-theme d-flex p-3">
        <div class="w-50 d-flex justify-content-end mr-5">
            <div class="footer-about">
                <div class="heading">
                    Sobre Congresso em Chamas
                </div>
                <p class="common-text">
                    Congresso em Chamas é uma aplicação web que entrega ferramentas para o acompanhamento do trabalho dos deputados federais atualmente em mandato. Criado em 2020 por <span class="font-weight-bold">Gabriel Robaina</span>
                    utilizando Spring Boot no backend e HTML, CSS e JS no frontend com componentes Bootstrap.
                </p>
            </div>
        </div>
        <div class="w-50">
            <div class="heading">
                Sobre o autor
            </div>
            <div class="d-flex flex-wrap">
                <img src="../assets/devprofile.png" class="profile-picture rounded-circle mr-3 mb-3">
                <div id="profile-details-container">
                    <p class="author-title">
                        Gabriel Pimenta Robaina
                    </p>
                    <div class="d-flex">
                        <a href="https://www.linkedin.com/in/gabriel-robaina-8b6542114/" target="_blank">
                            <img src="../assets/linkedin-icon.png" class="social-media-icon">
                        </a>
                        <a href="https://github.com/gpr-indevelopment/congresso_em_chamas" target="_blank">
                            <img src="../assets/github-icon.png" class="social-media-icon">
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </footer>
    <div class="global-overlay">
        <div class="spinner-border text-warning mt-3" role="status"></div>
    </div>
    <script>
        $.get(`${baseUrl}politicians/${politicianId}`)
            .done(politician => {
                renderProfile(document.getElementById("profile-container"), politician);
                $.ajax({
                    url: `${baseUrl}politicians/${politicianId}/monthlyexpenses`,
                    type: "get",
                    data: {
                        years: `${new Date().getFullYear()}`
                    },
                    success: function (expenses) {
                        renderExpenses(expenses, document.getElementById("chart-container"), "line");
                        clearLoadingState();
                    },
                })
            })
        initializeNavLinks(politicianId);
    </script>
</body>

</html>